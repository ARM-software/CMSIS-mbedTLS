<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>mbed TLS v3.1.0: crypto_compat.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">mbed TLS v3.1.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_2c00119299a10c22d7d936c8d817ad65.html">mbedcrypto</a></li><li class="navelem"><a class="el" href="dir_05e9957f24a7193700a1ea83ede7799f.html">psa</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">crypto_compat.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>PSA cryptography module: Backward compatibility aliases.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="crypto__compat_8h__dep__incl.png" border="0" usemap="#crypto__compat_8hdep" alt=""/></div>
<map name="crypto__compat_8hdep" id="crypto__compat_8hdep">
<area shape="rect" id="node2" href="crypto__extra_8h.html" title="PSA cryptography module: Mbed TLS vendor extensions. " alt="" coords="85,80,191,107"/><area shape="rect" id="node3" href="crypto_8h.html" title="Platform Security Architecture cryptography module. " alt="" coords="103,155,173,181"/><area shape="rect" id="node4" href="pk_8h.html" title="Public Key abstraction layer. " alt="" coords="115,229,161,256"/><area shape="rect" id="node6" href="ssl_8h.html" title="SSL/TLS functions. " alt="" coords="313,528,363,555"/><area shape="rect" id="node17" href="psa__util_8h.html" title="Utility functions for the use of the PSA Crypto library. " alt="" coords="5,379,84,405"/><area shape="rect" id="node5" href="ssl__ciphersuites_8h.html" title="SSL Ciphersuites for mbed TLS. " alt="" coords="107,453,233,480"/><area shape="rect" id="node12" href="x509_8h.html" title="X.509 generic defines and structures. " alt="" coords="238,304,299,331"/><area shape="rect" id="node16" href="oid_8h.html" title="Object Identifier (OID) database. " alt="" coords="82,304,133,331"/><area shape="rect" id="node7" href="debug_8h.html" title="Functions for controlling and providing debug output from the library. " alt="" coords="71,603,139,629"/><area shape="rect" id="node8" href="net__sockets_8h.html" title="Network sockets abstraction layer to integrate Mbed TLS into a BSD&#45;style sockets API. " alt="" coords="163,603,267,629"/><area shape="rect" id="node9" href="ssl__cache_8h.html" title="SSL session cache implementation. " alt="" coords="292,603,384,629"/><area shape="rect" id="node10" href="ssl__cookie_8h.html" title="DTLS cookie callbacks implementation. " alt="" coords="408,603,503,629"/><area shape="rect" id="node11" href="ssl__ticket_8h.html" title="TLS server ticket callbacks implementation. " alt="" coords="527,603,616,629"/><area shape="rect" id="node13" href="x509__crt_8h.html" title="X.509 certificate parsing and writing. " alt="" coords="258,453,341,480"/><area shape="rect" id="node14" href="x509__crl_8h.html" title="X.509 certificate revocation list parsing. " alt="" coords="258,379,341,405"/><area shape="rect" id="node15" href="x509__csr_8h.html" title="X.509 certificate signing request parsing and writing. " alt="" coords="365,379,452,405"/></map>
</div>
</div>
<p><a href="crypto__compat_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a95017cf75d44a5ce463d585740a9bcf6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crypto__compat_8h.html#a95017cf75d44a5ce463d585740a9bcf6">PSA_KEY_HANDLE_INIT</a>&#160;&#160;&#160;<a class="el" href="group__key__lifetimes.html#ga838f2dc64e670aa69fc4c0b82932f021">MBEDTLS_SVC_KEY_ID_INIT</a></td></tr>
<tr class="separator:a95017cf75d44a5ce463d585740a9bcf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a0a6f2a05474d7789332f228946840504"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structmbedtls__svc__key__id__t.html">mbedtls_svc_key_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crypto__compat_8h.html#a0a6f2a05474d7789332f228946840504">psa_key_handle_t</a></td></tr>
<tr class="separator:a0a6f2a05474d7789332f228946840504"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab0a62e4db36560fc64e6a684abe1ef49"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crypto__compat_8h.html#ab0a62e4db36560fc64e6a684abe1ef49">psa_key_handle_is_null</a> (<a class="el" href="crypto__compat_8h.html#a0a6f2a05474d7789332f228946840504">psa_key_handle_t</a> handle)</td></tr>
<tr class="separator:ab0a62e4db36560fc64e6a684abe1ef49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a950f0f358a0a012b043d02e55faed7c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crypto__compat_8h.html#a950f0f358a0a012b043d02e55faed7c0">psa_open_key</a> (<a class="el" href="structmbedtls__svc__key__id__t.html">mbedtls_svc_key_id_t</a> key, <a class="el" href="crypto__compat_8h.html#a0a6f2a05474d7789332f228946840504">psa_key_handle_t</a> *handle)</td></tr>
<tr class="separator:a950f0f358a0a012b043d02e55faed7c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa09b720d299dfe6b9f41c36e448078eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crypto__compat_8h.html#aa09b720d299dfe6b9f41c36e448078eb">psa_close_key</a> (<a class="el" href="crypto__compat_8h.html#a0a6f2a05474d7789332f228946840504">psa_key_handle_t</a> handle)</td></tr>
<tr class="separator:aa09b720d299dfe6b9f41c36e448078eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PSA cryptography module: Backward compatibility aliases. </p>
<p>This header declares alternative names for macro and functions. New application code should not use these names. These names may be removed in a future version of Mbed Crypto.</p>
<dl class="section note"><dt>Note</dt><dd>This file may not be included directly. Applications must include <a class="el" href="crypto_8h.html" title="Platform Security Architecture cryptography module. ">psa/crypto.h</a>. </dd></dl>

<p>Definition in file <a class="el" href="crypto__compat_8h_source.html">crypto_compat.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a95017cf75d44a5ce463d585740a9bcf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSA_KEY_HANDLE_INIT&#160;&#160;&#160;<a class="el" href="group__key__lifetimes.html#ga838f2dc64e670aa69fc4c0b82932f021">MBEDTLS_SVC_KEY_ID_INIT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="crypto__compat_8h_source.html#l00045">45</a> of file <a class="el" href="crypto__compat_8h_source.html">crypto_compat.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a0a6f2a05474d7789332f228946840504"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structmbedtls__svc__key__id__t.html">mbedtls_svc_key_id_t</a> <a class="el" href="crypto__compat_8h.html#a0a6f2a05474d7789332f228946840504">psa_key_handle_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="crypto__compat_8h_source.html#l00043">43</a> of file <a class="el" href="crypto__compat_8h_source.html">crypto_compat.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa09b720d299dfe6b9f41c36e448078eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_close_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="crypto__compat_8h.html#a0a6f2a05474d7789332f228946840504">psa_key_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close a key handle.</p>
<p>If the handle designates a volatile key, this will destroy the key material and free all associated resources, just like <a class="el" href="group__key__management.html#ga5f52644312291335682fbc0292c43cd2" title="Destroy a key. ">psa_destroy_key()</a>.</p>
<p>If this is the last open handle to a persistent key, then closing the handle will free all resources associated with the key in volatile memory. The key data in persistent storage is not affected and can be opened again later with a call to <a class="el" href="crypto__compat_8h.html#a950f0f358a0a012b043d02e55faed7c0">psa_open_key()</a>.</p>
<p>Closing the key handle makes the handle invalid, and the key handle must not be used again by the application.</p>
<dl class="section note"><dt>Note</dt><dd>This API is not part of the PSA Cryptography API Release 1.0.0 specification. It was defined in the 1.0 Beta 3 version of the specification but was removed in the 1.0.0 released version. This API is kept for the time being to not break applications relying on it. It is not deprecated yet but will be in the near future.</dd>
<dd>
If the key handle was used to set up an active :ref:`multipart operation &lt;multipart-operations&gt;`, then closing the key handle can cause the multipart operation to fail. Applications should maintain the key handle until after the multipart operation has finished.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>The key handle to close. If this is <code>0</code>, do nothing and return <code>PSA_SUCCESS</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error.html#ga4cc859e2c66ca381c7418db3527a65e1">PSA_SUCCESS</a></td><td><code>handle</code> was a valid handle or <code>0</code>. It is now closed. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#gadf22718935657c2c3168c228204085f9">PSA_ERROR_INVALID_HANDLE</a></td><td><code>handle</code> is not a valid handle nor <code>0</code>. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga5cdb6948371d49e916106249020ea3f7">PSA_ERROR_COMMUNICATION_FAILURE</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga116f4d4c6a9d9db3397991a8472d8950">PSA_ERROR_CORRUPTION_DETECTED</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga933d40fa2a591004f2e93aa91e11db84">PSA_ERROR_BAD_STATE</a></td><td>The library has not been previously initialized by <a class="el" href="group__initialization.html#ga2de150803fc2f7dc6101d5af7e921dd9" title="Library initialization. ">psa_crypto_init()</a>. It is implementation-dependent whether a failure to initialize results in this error code. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab0a62e4db36560fc64e6a684abe1ef49"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int psa_key_handle_is_null </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="crypto__compat_8h.html#a0a6f2a05474d7789332f228946840504">psa_key_handle_t</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check whether an handle is null.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Non-zero if the handle is null, zero otherwise. </dd></dl>

<p>Definition at line <a class="el" href="crypto__compat_8h_source.html#l00053">53</a> of file <a class="el" href="crypto__compat_8h_source.html">crypto_compat.h</a>.</p>

<p>References <a class="el" href="crypto__values_8h_source.html#l02237">mbedtls_svc_key_id_is_null()</a>.</p>

</div>
</div>
<a class="anchor" id="a950f0f358a0a012b043d02e55faed7c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_open_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmbedtls__svc__key__id__t.html">mbedtls_svc_key_id_t</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="crypto__compat_8h.html#a0a6f2a05474d7789332f228946840504">psa_key_handle_t</a> *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a handle to an existing persistent key.</p>
<p>Open a handle to a persistent key. A key is persistent if it was created with a lifetime other than <a class="el" href="group__key__lifetimes.html#ga8b438870ba69489b685730d346455108">PSA_KEY_LIFETIME_VOLATILE</a>. A persistent key always has a nonzero key identifier, set with <a class="el" href="group__attributes.html#gae48fcfdc72a23e7499957d7f54ff5a64">psa_set_key_id()</a> when creating the key. Implementations may provide additional pre-provisioned keys that can be opened with <a class="el" href="crypto__compat_8h.html#a950f0f358a0a012b043d02e55faed7c0">psa_open_key()</a>. Such keys have an application key identifier in the vendor range, as documented in the description of <a class="el" href="group__key__lifetimes.html#ga11e986351c65bd3dc3c0fe2cd9926e4b">psa_key_id_t</a>.</p>
<p>The application must eventually close the handle with <a class="el" href="crypto__compat_8h.html#aa09b720d299dfe6b9f41c36e448078eb">psa_close_key()</a> or <a class="el" href="group__key__management.html#ga5f52644312291335682fbc0292c43cd2" title="Destroy a key. ">psa_destroy_key()</a> to release associated resources. If the application dies without calling one of these functions, the implementation should perform the equivalent of a call to <a class="el" href="crypto__compat_8h.html#aa09b720d299dfe6b9f41c36e448078eb">psa_close_key()</a>.</p>
<p>Some implementations permit an application to open the same key multiple times. If this is successful, each call to <a class="el" href="crypto__compat_8h.html#a950f0f358a0a012b043d02e55faed7c0">psa_open_key()</a> will return a different key handle.</p>
<dl class="section note"><dt>Note</dt><dd>This API is not part of the PSA Cryptography API Release 1.0.0 specification. It was defined in the 1.0 Beta 3 version of the specification but was removed in the 1.0.0 released version. This API is kept for the time being to not break applications relying on it. It is not deprecated yet but will be in the near future.</dd>
<dd>
Applications that rely on opening a key multiple times will not be portable to implementations that only permit a single key handle to be opened. See also :ref:`key-handles`.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">key</td><td>The persistent identifier of the key. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">handle</td><td>On success, a handle to the key.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error.html#ga4cc859e2c66ca381c7418db3527a65e1">PSA_SUCCESS</a></td><td>Success. The application can now use the value of <code>*handle</code> to access the key. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga91b2ad8a867517a2651f1b076c5216e5">PSA_ERROR_INSUFFICIENT_MEMORY</a></td><td>The implementation does not have sufficient resources to open the key. This can be due to reaching an implementation limit on the number of open keys, the number of open key handles, or available memory. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga18646babb2ae6cbde02ea3828bbd9141">PSA_ERROR_DOES_NOT_EXIST</a></td><td>There is no persistent key with key identifier <code>key</code>. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga798df25a505ebf931f7bec1f80f1f85f">PSA_ERROR_INVALID_ARGUMENT</a></td><td><code>key</code> is not a valid persistent key identifier. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga4d1b8dd8526177a15a210b7afc1accb1">PSA_ERROR_NOT_PERMITTED</a></td><td>The specified key exists, but the application does not have the permission to access it. Note that this specification does not define any way to create such a key, but it may be possible through implementation-specific means. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga5cdb6948371d49e916106249020ea3f7">PSA_ERROR_COMMUNICATION_FAILURE</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga116f4d4c6a9d9db3397991a8472d8950">PSA_ERROR_CORRUPTION_DETECTED</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#gadd169a1af2707862b95fb9df91dfc37d">PSA_ERROR_STORAGE_FAILURE</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#gacebfbd25a7c2a727694fb57182a66533">PSA_ERROR_DATA_INVALID</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga9febb81a44bdeb4c6c42bf4f697b13bf">PSA_ERROR_DATA_CORRUPT</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga933d40fa2a591004f2e93aa91e11db84">PSA_ERROR_BAD_STATE</a></td><td>The library has not been previously initialized by <a class="el" href="group__initialization.html#ga2de150803fc2f7dc6101d5af7e921dd9" title="Library initialization. ">psa_crypto_init()</a>. It is implementation-dependent whether a failure to initialize results in this error code. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Aug 30 2022 09:50:16 for mbed TLS v3.1.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
